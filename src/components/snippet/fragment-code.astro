---
import type { Fragment } from "@/types";
import { Code } from "@astrojs/starlight/components";

interface Props {
  fragment: Fragment;
}

const { fragment } = Astro.props;
---

<Code
  class="fragment-code scrollable scrollbar"
  code={fragment.code}
  wrap
  preserveIndent
  frame={fragment.language === "sh" ? "terminal" : "auto"}
  lang={fragment.language}
  title={`${fragment.filename}.${fragment.language}`}
/>

<style is:inline>
  .expressive-code .copy {
    inset-inline-end: 1rem;
  }

  .fragment-code.scrollable {
    height: 187px;
    overflow-y: auto;
  }

  .fragment-code.scrollable figure.frame {
    border-radius: 0 0 0.5rem 0.5rem;
    overflow: hidden;
  }

  .fragment-code.scrollable pre.wrap {
    height: 148px;
  }

  .fragment-code.expressive-code .frame.has-title span.title {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .fragment-code.expressive-code .frame.has-title.is-terminal span.title {
    width: 50%;
    text-align: center;
  }

  .fragment-code.expressive-code .frame.has-title:not(.is-terminal) span.title {
    width: 100%;
  }

  .fragment-code.expressive-code .frame.has-title:not(.is-terminal) .header::before,
  .fragment-code.expressive-code .frame.has-title:not(.is-terminal) span.title,
  .fragment-code.expressive-code .frame.has-title:not(.is-terminal) span.title::after {
    border-top: var(--ec-frm-edActTabIndHt) solid var(--ec-frm-edActTabIndBtmCol);
  }
</style>
